<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>wiki</title>
    <link rel="stylesheet" href="<%= Path.join(@root_path, "style.css") %>" />
  </head>
  <body class="px-6 py-16 mx-auto max-w-7xl lg:px-8">
    <%= EEx.eval_file("templates/_header.html.eex", assigns: Keyword.merge(assigns, filename: "index.html")) %>
    <ul class="mt-8 leading-7">
      <%= for folder <- @folders do %>
        <li>
          <a class="flex items-center" href="<%= Path.join([@root_path, folder, "index.html"]) %>">
            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path d="M3.75 3A1.75 1.75 0 002 4.75v3.26a3.235 3.235 0 011.75-.51h12.5c.644 0 1.245.188 1.75.51V6.75A1.75 1.75 0 0016.25 5h-4.836a.25.25 0 01-.177-.073L9.823 3.513A1.75 1.75 0 008.586 3H3.75zM3.75 9A1.75 1.75 0 002 10.75v4.5c0 .966.784 1.75 1.75 1.75h12.5A1.75 1.75 0 0018 15.25v-4.5A1.75 1.75 0 0016.25 9H3.75z" />
            </svg>
            <span class="ml-1"><%= hd(Enum.reverse(Path.split(folder))) %></span>
          </a>
        </li>
      <% end %>
      <%= for page <- Enum.sort_by(@pages, &(&1.title)) do %>
        <li>
          <a class="flex items-center" href="<%= Path.join(@root_path, page.filename) %>">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
              <path fill-rule="evenodd" d="M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm2.25 8.5a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5zm0 3a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z" clip-rule="evenodd" />
            </svg>
            <span class="ml-1"><%= page.title %></span>
          </a>
        </li>
      <% end %>
    </ul>
    <%= EEx.eval_file("templates/_footer.html.eex", assigns: []) %>
  </body>
</html>
